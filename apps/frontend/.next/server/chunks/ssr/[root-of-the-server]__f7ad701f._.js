module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},90300,a=>{"use strict";var b=a.i(77331);a.s(["showToast",0,{success:a=>{b.default.success(a)},error:a=>{b.default.error(a)},loading:a=>b.default.loading(a),promise:(a,c)=>b.default.promise(a,c),dismiss:a=>{b.default.dismiss(a)}}])},29669,a=>{"use strict";var b=a.i(42093),c=a.i(85455),d=a.i(99026);a.i(33303);var e=a.i(52019),f=a.i(90300),g=a.i(62373);function h({params:a}){let{slug:h,sessionId:i}=(0,c.use)(a),j=(0,d.useRouter)(),[k,l]=(0,c.useState)(""),{data:m,isLoading:n,error:o,refetch:p}=(0,e.useFlowSession)(i),q=(0,e.useSubmitAnswer)(),r=(0,e.useCompleteFlow)(),s=m?.data,t=async()=>{if(!s?.currentQuestion||!k||Array.isArray(k)&&0===k.length)return void f.showToast.error("Please select an answer");try{let a=await q.mutateAsync({sessionId:i,questionId:s.currentQuestion.id,value:k});"completed"===a.data.status?(f.showToast.success("Flow completed!"),j.push(`/discover/${h}/results/${i}`)):(l(""),await p())}catch(a){f.showToast.error("Failed to submit answer")}},u=async()=>{try{await r.mutateAsync(i),f.showToast.success("Flow completed!"),j.push(`/discover/${h}/results/${i}`)}catch(a){f.showToast.error("Failed to complete flow")}};if(n)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin text-6xl mb-4",children:"âš¡"}),(0,b.jsx)("p",{className:"text-xl text-[var(--muted)]",children:"Loading session..."})]})});if(o||!s)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ˜•"}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Session Not Found"}),(0,b.jsx)("p",{className:"text-[var(--muted)] mb-6",children:"This session doesn't exist or has expired."}),(0,b.jsx)(g.default,{href:"/discover",className:"inline-block px-6 py-3 bg-[var(--foreground)] text-[var(--background)] rounded-full font-semibold hover:opacity-80 transition-opacity",children:"Start New Discovery"})]})});if("completed"===s.status)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"âœ…"}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Flow Already Completed"}),(0,b.jsx)("p",{className:"text-[var(--muted)] mb-6",children:"This flow has already been completed."}),(0,b.jsx)(g.default,{href:`/discover/${h}/results/${i}`,className:"inline-block px-6 py-3 bg-[var(--foreground)] text-[var(--background)] rounded-full font-semibold hover:opacity-80 transition-opacity",children:"View Results"})]})});let v=s.currentQuestion;return v?(0,b.jsxs)("div",{className:"min-h-screen bg-[var(--background)]",children:[(0,b.jsx)("div",{className:"fixed top-0 left-0 right-0 h-1 bg-[var(--surface)] z-50",children:(0,b.jsx)("div",{className:"h-full bg-[var(--foreground)] transition-all duration-500",style:{width:`${s.progress}%`}})}),(0,b.jsx)("div",{className:"border-b border-[var(--border)] bg-[var(--surface)]",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-3xl",children:s.flow.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:s.flow.title}),(0,b.jsxs)("p",{className:"text-sm text-[var(--muted)]",children:["Question ",v.questionNumber," of ",v.totalQuestions]})]})]}),(0,b.jsx)("button",{onClick:u,className:"text-sm text-[var(--muted)] hover:text-[var(--foreground)] transition-colors",children:"Skip to Results â†’"})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center",children:v.text}),v.options&&(0,b.jsx)("div",{className:"space-y-3 mb-8",children:v.options.map(a=>{let c="multiple"===v.type?Array.isArray(k)&&k.includes(a.value):k===a.value;return(0,b.jsx)("button",{onClick:()=>{var b;return b=a.value,void("multiple"===v.type?l(a=>{let c=Array.isArray(a)?a:[];return c.includes(b)?c.filter(a=>a!==b):[...c,b]}):l(b))},className:`w-full p-5 text-left border-2 rounded-xl transition-all ${c?"border-[var(--foreground)] bg-[var(--surface)]":"border-[var(--border)] hover:border-[var(--foreground)]"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-6 h-6 rounded-${"multiple"===v.type?"md":"full"} border-2 flex items-center justify-center ${c?"border-[var(--foreground)] bg-[var(--foreground)]":"border-[var(--border)]"}`,children:c&&(0,b.jsx)("span",{className:"text-[var(--background)] text-sm",children:"âœ“"})}),(0,b.jsx)("span",{className:"text-lg",children:a.label})]})},a.value)})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:t,disabled:q.isPending||!k||Array.isArray(k)&&0===k.length,className:"px-10 py-4 bg-[var(--foreground)] text-[var(--background)] rounded-full font-bold text-lg hover:opacity-80 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:q.isPending?"Submitting...":"Continue"})}),"multiple"===v.type&&(0,b.jsx)("p",{className:"text-center text-sm text-[var(--muted)] mt-4",children:"Select all that apply"})]})})]}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"All Questions Answered!"}),(0,b.jsx)("p",{className:"text-[var(--muted)] mb-6",children:"Click below to see your recommendations."}),(0,b.jsx)("button",{onClick:u,disabled:r.isPending,className:"px-8 py-3 bg-[var(--foreground)] text-[var(--background)] rounded-full font-semibold hover:opacity-80 transition-opacity disabled:opacity-50",children:r.isPending?"Loading...":"Get Recommendations"})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f7ad701f._.js.map